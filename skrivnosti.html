<!DOCTYPE html>
<html>
    <head>
        <title>Ugankar</title>
        <meta charset="utf8">
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <script>
         let alphabet = "abcčdefghijklmnopqrsštuvwxyzž ,.;:!?ABCČDEFGHIJKLMNOPQRSŠTUVWYZŽ0123456789()/_?-+*'#$%&@";

         function charAdd(char, val, mult) {
             var offset = alphabet.indexOf(val);
             var code = (alphabet.indexOf(char) + mult*offset + alphabet.length) % alphabet.length;
             return alphabet[code];
         }

         function encrypt(text, key) {
             var newString = "";
             for (var i = 0; i < text.length; i++) {
                 newString += charAdd(text[i], key[i % key.length], 1);
             }
             return newString;
         }

         function decrypt(text, key) {
             var newString = "";
             for (var i = 0; i < text.length; i++) {
                 newString += charAdd(text[i], key[i % key.length], -1);
             }
             return newString;
         }
        </script>

        <script>

         var secrets = [
             "ušot:srFošByu;",
             "y,ownišCGž!.l,mn:NoČxžrnwB,ČtnunrCHyt;qCy,ownw:CRvHyr,q;dBx;:Cmr:Fzogr;CvžHkr;cCvČ:okwfrpvHyrCt;iHBD;;gtm!,ČynesiAHxgCpiwžuj?C ixCHvlCpn:FowmilCsPŽšxjnsdBwE;4tiovH;jipšdPAo;;qmmPsx;vcžpžswmn;CmBH:uimi:wš hmcCnžHučqmw:!zšxlpi:!o qnln?P_jfvk;dP.žhxšwvH,F;šcšsP!sC",
             "?lnvDd:,_r  nt!owUx:fsoUyšweEiNmHuDsCČpmp!vH:!mzyHD!zeGxKmžfAHNxqrCGqNx.šOčqnvužsDAs,h,šWlšy*šrEičef+rQ/muTnrU686*)5S8q:_rv+ERohŽOqŽ*DUDžqryUtor!wnUewmrHIxwzj?i0" ,
             "IprtšnKC*lčžmJiKyC?Hx.z wizs:BCvGC:lt :NiEpsB CF.t;dBDKTi:Iz!:iGs,vžgČGDrLso;mPwuAsANzsEd :JntlznVCFtdvwP.AuČGDrLvaFiP('Am U(#F ždHwKviGAwBEiž:,wACC0 CwyiGvHzrtrGLwLoeoi?nLAvnUmB!gv:ČiKtnGPrvtšGr;lMAVn:i.uuwiGČKpvG:w lmswSC;lšnNnBt :sPxršn?Gn ;iGszCČljsVC:qknxžzzAž Uq.ldži: zAwrU,wmeH:Bn g,sKrL.oGeCtžAovNČLlm,d!CČuCžCusEvs.žDK5C;:nuz odE;:AžvUAsži!iGCČxrGAnCwaH:ČzEuC :C,ltsu;qKqnGHmyzv uPvrA, U.ylnxsR",
             " ltGkl:G5ke.UžqHBlz?NDjqH:lAstBauo!BA;tNoEFnruvtDa;HBAhq,Tnu,G jn:Gin,HAroyK :šGuhpČHžlx A,nF!ztHvtAšBKopšHAkeNH xo;yužvChE!,sumNGeEu ,uv,FoGH1hAwF!ntHBpknEUvqzvru!F!lq!JAvv,ŠmqIGvpvtFipšHAyyATctIGymjČ!,EJICA0L mq?GžpwFH,EyvAtjNLplsnA,!F! vo?lnšČCjqIGpt!,ŠrqrszAs.!gzC ApryW",
             "BrtnpdvK1p?aisrrH,y ;režspE hmwČ,DxrzkovJD/eimxK kNkqstšwENzvdžv D;ayivvH,A vd;BAkHloisvH tzsi!Č:yzeoi?KA:xi!xeOHsFttvCfčoČižiAx,yžlj?g:ž@ziqi*uč/&Ns#QČ;c(w6/61v;.CZKoZAU3q/FGy)CP 3ueEšxNtj:ovHzČi;re;xpNs!ošEwxDkš:t,,.wigsAK1kNnoioKxpNnjo!;oz,sA",
             "bC zpsČHCWOpn.?w5DU š.yuhN!njLLo&GC:nČNu-.Lnj:,y8YUwnLB,_AČž!:yy'WIrww!LhČN!tCRčS?KužwPu'JAxjNv,+s?uqwisSh@(k1f4šA@%3/+YNc?NqJtU;i9BFxu6NBWFW,:o7;HFt!L 3OVF;sF,hN!FmžF:'WL š;?w@WGvj:yu3WCyj:tJ",
             "CljrDgrU9,Auj:pČ,PpKgswžšD: AsCI.xqmmtyLW,Žg;eIšn:N  Gp.xqo:šyVGjKd p.smdGg."
         ];

         function klikni() {
             var key = document.getElementById('ugankar-input').value.toLowerCase();
             for (var i = 0; i < key.length; i++) {
                 if (alphabet.indexOf(key[i]) == -1) {
                     alert("nedovoljen znak: " + key[i]);
                     return;
                 }
             }

             for (var i = 0; i < secrets.length; i++) {
                 var decrypted = decrypt(secrets[i], key);
                 if (decrypted.startsWith("ugankar ")) {
                     document.getElementById('ugankar-resitev').innerHTML =
                     decrypted.substring(8);
                 }
             }
         }
        </script>
        <div class="ugankar-box">
            <input type="text" id="ugankar-input" placeholder="Napiši rešitev ...">
            <br>
            <button type="button" onclick="klikni()">Razkrij</button>
        </div>
        <hr>
        <div class="ugankar-box">
            <p id="ugankar-resitev"></p>
        </div>
    </body>
</html>
